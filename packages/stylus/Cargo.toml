[package]
name = "uzkv-stylus"
version = "0.1.0"
edition = "2021"
rust-version = "1.75"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
stylus-sdk = { version = "0.5.0", default-features = false }

# Override alloy-primitives features to use tiny-keccak instead of native-keccak
alloy-primitives = { version = "0.3", default-features = false, features = ["tiny-keccak"] }

# Custom allocator for no_std WASM environment (production-grade memory management)
wee_alloc = "0.4.5"

# Patch alloy-primitives to use vendored version with tiny-keccak for Windows
[patch.crates-io]
alloy-primitives = { path = "../../vendor/alloy-primitives-0.3.3/crates/primitives" }

# Vendored arkworks cryptography libraries (supply chain security)
# Using local paths instead of crates.io for audit trail and deterministic builds
# All dependencies configured with default-features = false for no_std compatibility
ark-groth16 = { path = "vendor/ark-groth16", version = "0.4.0", default-features = false, features = ["std"] }
ark-bn254 = { path = "vendor/ark-curves/bn254", version = "0.3.0", default-features = false, features = ["std"] }
ark-ec = { path = "vendor/ark-algebra/ec", version = "0.4.0", default-features = false, features = ["std"] }
ark-ff = { path = "vendor/ark-algebra/ff", version = "0.4.0", default-features = false, features = ["std"] }
ark-serialize = { path = "vendor/ark-algebra/serialize", version = "0.4.0", default-features = false, features = ["std"] }

# PLONK verifier dependencies (halo2-based) - Optional for now due to std requirements
# halo2_proofs = { version = "0.3", default-features = false, features = ["batch"], optional = true }
# halo2curves = { version = "0.6", default-features = false, optional = true }
# sha3 = { version = "0.10", default-features = false, optional = true }

# STARK verifier dependencies (transparent setup) - Optional for now due to std requirements
# blake3 = { version = "1.5", default-features = false, features = ["no_avx2", "no_avx512", "no_neon"], optional = true }

[profile.release]
codegen-units = 1
panic = "abort"
opt-level = "z"
strip = true
lto = true

[features]
default = []
