[package]
name = "stark"
version = "0.1.0"
edition = "2021"
authors = ["UZKV Team"]
description = "STARK (Scalable Transparent ARgument of Knowledge) verifier for Arbitrum Stylus"
license = "MIT OR Apache-2.0"

[dependencies]
# Winterfell STARK library
winterfell = { version = "0.9", default-features = false }
winter-math = { version = "0.9", default-features = false }
winter-crypto = { version = "0.9", default-features = false }
winter-fri = { version = "0.9", default-features = false }
winter-air = { version = "0.9", default-features = false }

# Cryptographic primitives
blake3 = { version = "1.5", default-features = false }

# Stylus SDK (optional, only for WASM builds)
stylus-sdk = { version = "0.6", optional = true }
wee_alloc = { version = "0.4.5", optional = true }

[dev-dependencies]
ark-std = { version = "0.4", features = ["std"] }
winterfell = { version = "0.9", features = ["std"] }
hex = "0.4"

[features]
default = []
std = ["winterfell/std", "winter-math/std", "winter-crypto/std"]
stylus = ["stylus-sdk", "wee_alloc"]  # Enable for Arbitrum Stylus builds

[profile.release]
opt-level = "z"        # Optimize for size
lto = true             # Link-time optimization
codegen-units = 1      # Single codegen unit for better optimization
panic = "abort"        # Abort on panic (no unwinding)
strip = "symbols"      # Strip debug symbols
overflow-checks = false # Disable overflow checks in release

[profile.dev]
opt-level = 1          # Some optimization for development
